/* Basic Reset & CSS Variables */
:root {
    /* Color Palettes */
    --light-bg: #f0f2f5;
    --light-card-bg: #ffffff;
    --light-text: #1c1e21;
    --light-border: #dce1e6;
    --light-accent: #0866ff;
    --light-icon: #606770;
 
    --dark-bg: #18191a;
    --dark-card-bg: #242526;
    --dark-text: #e4e6eb;
    --dark-border: #3a3b3c;
    --dark-accent: #2d88ff;
    --dark-icon: #b0b3b8;
 
    /* Semantic Theme Variables (Defaults to Light) */
    --color-bg: var(--light-bg);
    --color-card-bg: var(--light-card-bg);
    --color-text: var(--light-text);
    --color-border: var(--light-border);
    --color-accent: var(--light-accent);
    --color-icon: var(--light-icon);
    --shadow: 0 2px 4px rgba(0, 0, 0, 0.08), 0 8px 16px rgba(0, 0, 0, 0.08);
 
    /* Static Variables */
    --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    --border-radius: 8px;
    --transition-speed: 0.3s;
}

/* --- THEME STYLES --- */

/* Define Dark Mode Overrides */
body.dark-mode {
    --color-bg: var(--dark-bg);
    --color-card-bg: var(--dark-card-bg);
    --color-text: var(--dark-text);
    --color-border: var(--dark-border);
    --color-accent: var(--dark-accent);
    --color-icon: var(--dark-icon);
    --shadow: none; /* Remove shadow in dark mode for a flatter look */
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-family);
    background-color: var(--color-bg);
    color: var(--color-text);
    transition: background-color var(--transition-speed), color var(--transition-speed);
    /* Use flexbox to enable vertical centering and ensure footer sticks to bottom */
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* Hide the sun icon in dark mode, and moon in light mode */
body.dark-mode .sun { display: none; }
body.dark-mode .moon { display: block; }
.moon { display: none; }

/* Main Content Area */
main {
    flex-grow: 1; /* Allow main to fill available vertical space */
    display: flex;
    align-items: center; /* Vertical centering */
    justify-content: center; /* Horizontal centering */
    padding: 2rem 1rem; /* Add some space around the content box */
}


/* --- LAYOUT & COMPONENT STYLES --- */

/* Header */
header {
    position: relative; /* Needed for absolute positioning of child elements */
    display: flex;
    align-items: center;
    justify-content: center; /* This will horizontally center the title group */
    padding: 1.5rem 2rem; /* Increased vertical padding for more breathing room */
    background-color: var(--color-card-bg);
    border-bottom: 1px solid var(--color-border);
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    transition: background-color var(--transition-speed), border-color var(--transition-speed);
}

.header-logo {
    position: absolute;
    left: 2rem;
    top: 50%;
    transform: translateY(-50%);
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover; /* Ensures the image covers the area without distortion */
    border: 2px solid var(--color-border);
    box-shadow: var(--shadow);
    transition: border-color var(--transition-speed);
}

.header-title-group {
    text-align: center;
    margin: 0 1rem; /* Add some space so it doesn't touch logo/button on smaller screens */
}

h1 {
    font-size: 3.5rem; /* Doubled from 1.75rem */
}

.header-quote {
    margin-top: 0.5rem;
    font-style: italic;
    color: var(--color-icon);
    transition: color var(--transition-speed);
}

/* Theme Switcher Button */
#theme-switcher {
    position: absolute;
    top: 50%;
    right: 2rem;
    transform: translateY(-50%); /* Vertically center the button */
    width: 44px;
    height: 44px;
    border-radius: 50%;
    border: 1px solid var(--color-border);
    background-color: var(--color-card-bg);
    color: var(--color-icon);
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color var(--transition-speed), color var(--transition-speed), border-color var(--transition-speed);
}

#theme-switcher:hover {
    background-color: var(--color-bg); /* Use main background for hover */
}
.grid-container {
    display: grid;
    /* Creates a responsive grid that shows as many 320px columns as fit */
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 1.5rem;
    padding: 2rem;
    width: 100%; /* Occupy available width */
    max-width: 1200px; /* A slightly smaller max-width for a more contained feel */
    margin: 0; /* Centering is now handled by the <main> flex container */
    background-color: var(--color-card-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    transition: background-color var(--transition-speed), border-color var(--transition-speed);
}

/* On screens wide enough for 3 columns, lock it to 3 columns to get 4 rows */
@media (min-width: 1080px) {
    .grid-container {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* Folder Box */
.folder-box {
    background-color: var(--color-card-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    padding: 1rem;
    box-shadow: var(--shadow);
    transition: transform 0.2s, box-shadow 0.2s, background-color var(--transition-speed), border-color var(--transition-speed);
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 120px; /* Give folders a nice, uniform height */
    text-decoration: none;
    color: var(--color-text);
}

.folder-box:hover {
    transform: translateY(-5px);
}

.folder-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.folder-icon {
    color: var(--color-accent);
    width: 2rem;
    height: 2rem;
    transition: color var(--transition-speed);
}

.folder-header h3 {
    font-size: 1.1rem;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Visual indicator for a "cut" folder */
.folder-box.is-cut {
    opacity: 0.5;
    border-style: dashed;
}

/* Subfolder View Layout */
.subfolder-view {
    padding: 2rem;
    width: 100%; /* Occupy available width */
    max-width: 1200px; /* Match the grid container's width */
    margin: 0; /* Centering is now handled by the <main> flex container */
    background-color: var(--color-card-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    transition: background-color var(--transition-speed), border-color var(--transition-speed);
}

.subfolder-view-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--color-border);
}

/* The grid inside the subfolder view should not be a card itself, so we reset its styles. */
.subfolder-view .grid-container {
    background-color: transparent;
    border: none;
    box-shadow: none;
    margin: 0;
    padding: 0;
    padding-top: 1.5rem; /* Space between header and items */
    max-width: 100%;
}

.subfolder-view-header h2 {
    font-size: 1.5rem;
    color: var(--color-text);
}

.back-button {
    display: inline-flex;
    align-items: center;
    padding: 0.5rem 1rem;
    background-color: var(--color-card-bg);
    color: var(--color-text);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    text-decoration: none;
    font-weight: 600;
    transition: background-color 0.2s, box-shadow 0.2s;
}

.back-button:hover {
    background-color: var(--color-bg);
    box-shadow: var(--shadow);
}

/* Context Menu */
.context-menu {
    position: fixed;
    z-index: 1000;
    background-color: var(--color-card-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    display: none; /* Hidden by default */
    padding: 0.5rem 0;
    min-width: 150px;
}

.context-menu ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.context-menu li {
    padding: 0.75rem 1.5rem;
    cursor: pointer;
    color: var(--color-text);
    white-space: nowrap;
}

.context-menu li:hover {
    background-color: var(--color-bg);
}